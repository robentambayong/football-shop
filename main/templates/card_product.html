{% load static %}
{% load humanize %}

<article class="bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-200 group">

  <!-- Clickable area (image + info) -->
  <a href="{% url 'main:show_product' product.id %}" class="block relative overflow-hidden aspect-square bg-gray-100">
    {% if product.thumbnail %}
      <img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
    {% else %}
      <img src="{% static 'image/no-product.png' %}" alt="No image" class="w-full h-full object-contain">
    {% endif %}

    {% if product.is_featured %}
      <span class="absolute top-3 left-3 bg-black text-white text-xs px-3 py-1 rounded-full uppercase tracking-wide">
        Featured
      </span>
    {% endif %}
  </a>

  <!-- Product Info -->
  <div class="p-5 flex flex-col h-full">
    <!-- Title + Desc -->
    <div>
      <h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-1">
        <a href="{% url 'main:show_product' product.id %}" class="hover:text-green-600 transition-colors">
          {{ product.name }}
        </a>
      </h3>
      <p class="text-gray-500 text-sm mb-4 line-clamp-2">
        {{ product.description|truncatewords:15 }}
      </p>
    </div>

    <!-- Price + Buttons -->
    <div class="mt-4 flex items-center justify-between">
      <span class="text-xl font-bold text-green-600">
        Rp {{ product.price|intcomma }}
      </span>
      <div class="flex space-x-2">
        <a href="{% url 'main:show_product' product.id %}" 
           class="px-3 py-2 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700 text-sm">
          View
        </a>

        {% if user.is_authenticated and product.user.id == user.id %}
          <a href="{% url 'main:edit_product' product.id %}" 
             class="px-3 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 text-sm">
            Edit
          </a>
          <a href="{% url 'main:delete_product' product.id %}" 
             class="px-3 py-2 rounded-lg border border-red-300 text-red-600 hover:bg-red-50 text-sm">
            Delete
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</article>
